import{r as t,j as e,m,u as I,a as B,L,b as O}from"./index-NEmDPfEI.js";import{u as H,E as F,a as U}from"./index.esm-BTrZS-e_.js";const q=["A+","A-","B+","B-","AB+","AB-","O+","O-"],W=({register:s})=>{var h,y;const[o,S]=t.useState("A+"),[a,n]=t.useState([]),r=t.useRef(null);t.useEffect(()=>{if(r.current){const i=r.current.querySelectorAll("button"),d=Array.from(i).map(x=>({width:x.offsetWidth,offset:x.offsetLeft}));n(d)}},[]);const l=i=>{S(i)},f=q.indexOf(o),c=a[f]||{width:50,offset:0};return e.jsxs("div",{className:"w-full flex justify-center my-4",children:[e.jsxs("div",{ref:r,className:"relative flex bg-white border rounded-full shadow-md p-1 w-fit overflow-hidden",children:[q.map(i=>e.jsx("button",{type:"button",onClick:()=>l(i),className:`relative z-10 px-4 py-2 text-sm font-semibold transition-colors duration-300 rounded-full ${o===i?"text-white":"text-black"}`,children:i},i)),a.length>0&&e.jsx(m.div,{className:"absolute top-0 bottom-0 bg-indigo-600 rounded-full",initial:{x:((h=a[0])==null?void 0:h.offset)||0,width:((y=a[0])==null?void 0:y.width)||50},animate:{x:c.offset,width:c.width},transition:{type:"spring",stiffness:300,damping:20}})]}),e.jsx("input",{type:"hidden",...s("blood"),value:o})]})},z=()=>{const{register:s,handleSubmit:o,formState:{errors:S},setValue:a}=H(),[n,r]=t.useState(1),[l,f]=t.useState({}),[c,h]=t.useState(!1),[y,i]=t.useState(""),d=I(),{setUser:x}=B(),[b,C]=t.useState(!1),[j,P]=t.useState(!1),[N,A]=t.useState(!1),[v,E]=t.useState(!1),[w,M]=t.useState(!1),[k,D]=t.useState(!1);t.useEffect(()=>{localStorage.getItem("userToken")&&d("/home")},[d]),t.useEffect(()=>{l&&(C(l.hasAllergies||!1),P(l.hasChronicIllness||!1),A(l.hasMedication||!1),E(l.hasSurgeries||!1),M(l.smoking||!1),D(l.drinking||!1),a("allergy",l.allergy||""),a("chronic",l.chronic||""),a("currentmed",l.currentmed||""),a("pastsur",l.pastsur||""))},[l,a]);const R=p=>{f(g=>({...g,...p,hasAllergies:b,hasChronicIllness:j,hasMedication:N,hasSurgeries:v,smoking:w,drinking:k})),r(n+1)},T=async p=>{const g={...l,...p};console.log(g);try{const u=await O.post("http://localhost:8080/v1/register",g);if(u.data.success)localStorage.setItem("userToken",u.data.token),x(u.data.user),d("/home",{replace:!0});else throw new Error("Username or Email already exists")}catch(u){i(u.message||"Something went wrong!")}};return e.jsx("div",{className:"flex flex-col items-center justify-center bg-gray-100",children:e.jsxs(m.div,{className:"bg-white shadow-lg rounded-lg flex w-full max-w-5xl p-5 min-h-[80vh] my-3 relative",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},children:[e.jsxs("div",{className:"flex w-1/2 justify-center items-center h-full flex-col",children:[n===1?"":e.jsx("button",{onClick:()=>r(n-1),className:"bg-indigo-600 font-bold text-white py-1 px-5 rounded-full absolute left-3 top-3 hover:cursor-pointer",children:"Back"}),e.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:"Welcome to MediPal"}),e.jsx("img",{src:"/illustrations/patientReg.svg",alt:"Medicine Illustration",className:"my-auto"})]}),e.jsxs("div",{className:"w-full md:w-1/2 p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-4",children:n===1?"Basic Details":n===2?"Medical Details":"Terms & Conditions"}),e.jsx("hr",{className:"mb-4"}),n===1?e.jsxs(m.form,{onSubmit:o(R),className:"space-y-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{children:e.jsx("input",{type:"text",...s("name"),required:!0,placeholder:"Enter your name",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",...s("age",{min:1,max:120}),required:!0,placeholder:"Enter your age",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{...s("gender"),required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"M",children:"Male"}),e.jsx("option",{value:"F",children:"Female"})]})]}),e.jsx("input",{type:"email",...s("email"),required:!0,placeholder:"Enter your email",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("div",{children:e.jsx("input",{type:"tel",...s("phone",{pattern:/^[0-9]{10}$/}),required:!0,placeholder:"Enter your Contact",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsx("input",{type:"tel",...s("ephone",{pattern:/^[0-9]{10}$/}),required:!0,placeholder:"Enter your Emergency Contact",className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",placeholder:"Password",...s("password",{required:"Password is required"}),className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-3 flex items-center text-gray-600",onClick:()=>h(!c),children:c?e.jsx(F,{}):e.jsx(U,{})})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Next"})]}):n===2?e.jsxs(m.form,{onSubmit:o(R),className:"space-y-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx(W,{register:s}),e.jsxs("div",{className:"toggle-section",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",onChange:()=>C(!b),className:"toggle-checkbox"}),"Any Allergies?"]}),b&&e.jsx("input",{type:"text",...s("allergy"),placeholder:"List allergies",className:"input-field"})]}),e.jsxs("div",{className:"toggle-section",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",onChange:()=>P(!j),className:"toggle-checkbox"}),"Any Chronic Illness?"]}),j&&e.jsx("input",{type:"text",...s("chronic"),placeholder:"List chronic illnesses",className:"input-field"})]}),e.jsxs("div",{className:"toggle-section",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",onChange:()=>A(!N),className:"toggle-checkbox"}),"Any Ongoing Medications?"]}),N&&e.jsx("input",{type:"text",...s("currentmed"),placeholder:"List current medications",className:"input-field"})]}),e.jsxs("div",{className:"toggle-section",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",onChange:()=>E(!v),className:"toggle-checkbox"}),"Any Past Surgeries?"]}),v&&e.jsx("input",{type:"text",...s("pastsur"),placeholder:"List past surgeries",className:"input-field"})]}),e.jsxs("div",{className:"toggle-section",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",onChange:()=>M(!w),className:"toggle-checkbox"}),"Do you Smoke?"]}),w&&e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",...s("ifsmoking"),value:"Occasionally",className:"radio-input"}),"Occasionally"]}),e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",...s("ifsmoking"),value:"Regularly",className:"radio-input"}),"Regularly"]}),e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",...s("ifsmoking"),value:"Heavily",className:"radio-input"}),"Heavily"]})]})]}),e.jsxs("div",{className:"toggle-section",children:[e.jsxs("label",{className:"toggle-label",children:[e.jsx("input",{type:"checkbox",onChange:()=>D(!k),className:"toggle-checkbox"}),"Do you Drink?"]}),k&&e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",...s("ifdrinking"),value:"Occasionally",className:"radio-input"}),"Occasionally"]}),e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",...s("ifdrinking"),value:"Regularly",className:"radio-input"}),"Regularly"]}),e.jsxs("label",{className:"radio-label",children:[e.jsx("input",{type:"radio",...s("ifdrinking"),value:"Heavily",className:"radio-input"}),"Heavily"]})]})]}),e.jsx("button",{type:"submit",className:"btn-primary",children:"Next"})]}):e.jsxs(m.form,{onSubmit:o(T),className:"space-y-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsxs("div",{className:"border p-4 h-80 overflow-y-scroll bg-gray-50 rounded-md text-sm",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Terms & Conditions"}),e.jsx("p",{children:"Welcome to MediPal! By using our platform, you agree to the following terms and conditions. Please read them carefully."}),e.jsx("h4",{className:"font-semibold mt-2",children:"1. Acceptance of Terms"}),e.jsx("p",{children:"By accessing or using MediPal, you agree to be bound by these Terms and Conditions, along with our Privacy Policy."}),e.jsx("h4",{className:"font-semibold mt-2",children:"2. Services Provided"}),e.jsxs("p",{children:["MediPal is a telemedicine platform connecting patients with verified healthcare professionals. ",e.jsx("strong",{children:"No emergency services."})]}),e.jsx("h4",{className:"font-semibold mt-2",children:"3. User Responsibilities"}),e.jsxs("ul",{className:"list-disc ml-5",children:[e.jsx("li",{children:"Provide accurate and complete information."}),e.jsx("li",{children:"Use MediPal for lawful and ethical purposes."}),e.jsx("li",{children:"Must be 18+ years old or have parental consent."})]}),e.jsx("h4",{className:"font-semibold mt-2",children:"4. Privacy & Data Protection"}),e.jsx("p",{children:"We prioritize your privacy. Data is securely stored and encrypted."}),e.jsx("h4",{className:"font-semibold mt-2",children:"5. Limitation of Liability"}),e.jsx("p",{children:"MediPal is not liable for incorrect medical advice, loss due to reliance on teleconsultations, or service downtime."}),e.jsx("h4",{className:"font-semibold mt-2",children:"6. Changes to Terms"}),e.jsx("p",{children:"We may update these Terms & Conditions at any time."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"acceptTnC",required:!0}),e.jsxs("label",{htmlFor:"acceptTnC",className:"text-sm",children:["I accept the ",e.jsx("strong",{children:"Terms & Conditions"}),"."]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"consentData",required:!0}),e.jsx("label",{htmlFor:"consentData",className:"text-sm",children:"I give consent to share my medical data with doctors."})]}),e.jsx("button",{type:"submit",className:"btn-primary w-full",children:"Register"})]}),e.jsxs("p",{className:"text-center mt-4",children:["Already registered? ",e.jsx(L,{to:"/login",className:"text-blue-600",children:"Sign in"})]})]})]})})};export{z as default};
